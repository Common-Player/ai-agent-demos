# LangGraph 多功能 AI Agent (Python 版)

## 项目简介

本项目基于 LangGraph、LangChain 和大模型 API，构建了一个功能强大的 AI Agent，支持**命令行**和**Web 界面**两种使用方式。

## 🚀 新增功能：Web 界面
现在支持通过美观的网页界面使用 AI Agent！
- 🌐 **现代化 Web 界面**: 简洁美观的响应式设计
- 🎯 **预设功能按钮**: 天气查询、新闻搜索、网页提取、综合研究
- 💬 **自定义问题**: 支持任意问题输入
- ⚡ **实时反馈**: 加载状态显示和结果展示
- 📱 **移动端适配**: 完美支持手机和平板设备

## 主要功能

### 🌐 网络功能
- 🌤️ **天气查询**: 实时获取任意城市天气信息
- 📰 **新闻搜索**: 搜索最新新闻和热点话题  
- 📄 **网页内容提取**: 从指定URL提取和分析内容
- 🔬 **综合研究**: 多工具协作进行深度研究

### 🧮 本地工具
- 🧮 **数学计算**: 支持复杂数学表达式、三角函数、对数等
- ⏰ **时间功能**: 获取当前时间、日期查询、多种格式显示
- 📁 **文件操作**: 读取文件内容、写入文件、列出目录内容
- 💻 **系统信息**: 获取操作系统、内存、CPU、Python版本等信息

### 🤖 核心特性
- 💬 **自定义问答**: 支持任意问题和话题
- 🧠 **记忆功能**: 保持对话上下文，记住之前的交互
- 🎛️ **双界面支持**: 命令行 + Web 界面
- 使用 Google Gemini 2.5 Pro 大语言模型
- 集成 Tavily 搜索和内容提取工具
- 实时显示工具调用状态

## 功能实现方法
- 集成 TavilySearch 工具，Agent 在需要外部信息时会自动调用 Tavily 进行实时天气等相关内容检索，提升回答的准确性和时效性。
- 通过 LangChain 的 Agent 框架集成 Gemini 2.5 Pro 大模型和搜索工具完成搭建
- 实时显示工具调用状态，让用户清楚了解搜索过程
- 用户选择流式输出时，调用大模型的 `astream` 并处理返回数据，边生成边输出内容，实现实时反馈。

## 使用方法

### 🔧 环境配置
1. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```

2. 配置环境变量：
   创建 `.env` 文件并添加以下内容：
   ```bash
   # Google AI Studio API 配置（必需）
   GOOGLE_API_KEY=your_google_api_key_here
   
   # Tavily 搜索 API 配置（必需）
   TAVILY_API_KEY=your_tavily_api_key_here
   ```

### 🌐 方式一：Web 界面（推荐）
运行 Web 应用：
```bash
python run_web.py
```
然后在浏览器中访问：http://localhost:8080

**Web 界面功能：**

**🌐 网络功能：**
- 🌤️ **天气查询**: 点击按钮，输入城市名称查询天气
- 📰 **新闻搜索**: 点击按钮，输入主题搜索相关新闻
- 📄 **网页提取**: 点击按钮，输入URL提取网页内容
- 🔬 **综合研究**: 点击按钮，输入主题进行深度研究

**🧮 本地工具：**
- 🧮 **数学计算**: 点击按钮，输入数学表达式进行计算
- ⏰ **时间查询**: 点击按钮，查询当前时间或格式示例
- 📁 **文件操作**: 点击按钮，执行文件读写和目录操作
- 💻 **系统信息**: 点击按钮，获取系统状态信息

**💬 通用功能：**
- 💬 **自定义问题**: 在文本框中输入任意问题

### 💻 方式二：命令行界面
运行命令行版本：
```bash
python agent.py
```
按提示选择功能并输入相关信息。

### 🎮 快速体验

**基础使用：**
1. 运行 `python run_web.py`
2. 打开浏览器访问 http://localhost:8080
3. 体验各种功能！

**功能示例：**
- 🌤️ **天气查询**: 点击按钮，输入"北京"或"纽约"
- 🧮 **数学计算**: 点击按钮，输入"sqrt(16) + sin(pi/2)"
- ⏰ **时间查询**: 点击按钮，输入"current"查看当前时间
- 📁 **文件操作**: 点击按钮，输入"list:."查看当前目录
- 💻 **系统信息**: 点击按钮，输入"memory"查看内存使用情况
- 💬 **自定义问题**: 直接提问"帮我分析一下人工智能的发展趋势"

**测试新功能：**
```bash
# 可选：测试本地工具功能
python test_new_features.py
```

## 📝 API 密钥获取方式
- **Google API Key**: 访问 [Google AI Studio](https://aistudio.google.com/app/apikey) 创建 API 密钥
- **Tavily API Key**: 访问 [Tavily](https://tavily.com/) 注册并获取 API 密钥

## 使用的模型
- **Gemini 2.5 Pro**: Google 最新的高性能多模态大语言模型

## ✨ 项目特色
- 🌐 **双界面设计**: 同时支持 Web 界面和命令行界面，满足不同使用需求
- 🎯 **多功能集成**: 天气查询、新闻搜索、网页提取、综合研究等多种功能
- ⚡ **实时工具调用反馈**: 清晰显示 AI Agent 的工作过程
- 🔧 **智能工具协作**: Tavily 搜索 + 内容提取工具自动协作
- 🎨 **现代化界面**: 美观的渐变设计，响应式布局
- 📱 **跨平台支持**: 支持桌面端、平板、手机等多种设备
- 🚀 **高性能模型**: 基于 Google Gemini 2.5 Pro 先进大语言模型

## 🔄 技术架构
- **前端**: 纯 HTML + CSS + JavaScript，无框架依赖
- **后端**: Flask + LangGraph + LangChain 
- **AI 模型**: Google Gemini 2.5 Pro
- **工具集成**: Tavily Search + Tavily Extract
- **会话管理**: 基于 LangGraph 的内存管理