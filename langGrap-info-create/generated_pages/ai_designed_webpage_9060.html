<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ»‘é›ªå¤§å†’é™© - æ™ºèƒ½åŠ©ç†ä»ªè¡¨æ¿</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-gradient-start: #6dd5ed;
            --bg-gradient-end: #2193b0;
            --card-bg: rgba(255, 255, 255, 0.65);
            --card-border: rgba(255, 255, 255, 0.8);
            --text-dark: #1a2e3b;
            --text-light: #5a7384;
            --accent-color: #ff7e5f;
            --accent-gradient: linear-gradient(45deg, #ff7e5f, #feb47b);
            --shadow-color: rgba(33, 147, 176, 0.2);
            --font-main: 'Noto Sans SC', sans-serif;
            --font-heading: 'Poppins', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-main);
            background: linear-gradient(160deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            color: var(--text-dark);
            overflow-x: hidden;
        }

        /* --- é›ªèŠ±èƒŒæ™¯ --- */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .snow {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: fall linear infinite;
        }

        @keyframes fall {
            0% { transform: translateY(-10vh) translateX(0); }
            100% { transform: translateY(110vh) translateX(15vw); }
        }

        /* --- è§†å·®å±±è„‰èƒŒæ™¯ --- */
        .parallax-bg {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            z-index: 0;
            pointer-events: none;
        }

        .mountain {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            background-repeat: no-repeat;
            background-position: bottom center;
            background-size: cover;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .mountain-back {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23cdeff7" fill-opacity="1" d="M0,224L48,208C96,192,192,160,288,165.3C384,171,480,213,576,208C672,203,768,149,864,149.3C960,149,1056,203,1152,224C1248,245,1344,235,1392,229.3L1440,224L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>');
            z-index: 1;
        }

        .mountain-front {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.8" d="M0,288L60,261.3C120,235,240,181,360,176C480,171,600,213,720,208C840,203,960,149,1080,133.3C1200,117,1320,139,1380,149.3L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>');
            z-index: 2;
        }

        /* --- ä¸»å®¹å™¨å’Œå¤´éƒ¨ --- */
        .resort-dashboard {
            position: relative;
            z-index: 10;
            padding: 40px 20px;
            max-width: 1600px;
            margin: 0 auto;
        }

        .resort-header {
            text-align: center;
            margin-bottom: 60px;
            color: white;
        }

        .resort-header h1 {
            font-family: var(--font-heading);
            font-size: 3.5rem;
            font-weight: 700;
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            letter-spacing: 1px;
        }

        .resort-header p {
            font-size: 1.25rem;
            opacity: 0.9;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
            margin-top: 10px;
        }

        /* --- å¡ç‰‡ç½‘æ ¼å¸ƒå±€ --- */
        .dashboard-slope {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 25px;
        }

        /* --- å¡ç‰‡åŸºç¡€æ ·å¼ --- */
        .slope-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 24px;
            padding: 25px;
            box-shadow: 0 10px 35px var(--shadow-color);
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.4s ease;
            display: flex;
            flex-direction: column;
            animation: slide-in 0.8s cubic-bezier(0.25, 1, 0.5, 1) forwards;
            opacity: 0;
            transform: translateY(50px);
        }

        .slope-card:hover {
            transform: translateY(-10px) rotate(-1deg);
            box-shadow: 0 20px 45px var(--shadow-color);
        }

        @keyframes slide-in {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* å¡ç‰‡å…¥åœºåŠ¨ç”»å»¶è¿Ÿ */
        .slope-card:nth-child(1) { animation-delay: 0.1s; }
        .slope-card:nth-child(2) { animation-delay: 0.2s; }
        .slope-card:nth-child(3) { animation-delay: 0.3s; }
        .slope-card:nth-child(4) { animation-delay: 0.4s; }
        .slope-card:nth-child(5) { animation-delay: 0.5s; }
        .slope-card:nth-child(6) { animation-delay: 0.6s; }
        .slope-card:nth-child(7) { animation-delay: 0.7s; }

        /* --- å¡ç‰‡å¸ƒå±€è°ƒæ•´ --- */
        .card-weather { grid-column: span 5; }
        .card-news { grid-column: span 7; }
        .card-browser { grid-column: span 8; }
        .card-time { grid-column: span 4; }
        .card-research { grid-column: span 6; }
        .card-calculator { grid-column: span 3; }
        .card-file { grid-column: span 3; }

        /* --- å¡ç‰‡å†…éƒ¨æ ·å¼ --- */
        .card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.08);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            display: grid;
            place-items: center;
            background: var(--accent-gradient);
            border-radius: 16px;
            color: white;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(255, 126, 95, 0.4);
        }
        .card-icon svg { width: 24px; height: 24px; }

        .card-title {
            font-family: var(--font-heading);
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .card-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        /* --- è¾“å…¥å’ŒæŒ‰é’®æ ·å¼ --- */
        .input-goggle {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .card-input {
            flex-grow: 1;
            padding: 12px 18px;
            border: 1px solid #d0e0e8;
            border-radius: 12px;
            font-size: 1rem;
            font-family: var(--font-main);
            background: #f8fcff;
            outline: none;
            transition: all 0.3s ease;
        }

        .card-input:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 4px rgba(255, 126, 95, 0.2);
            background: white;
        }

        .ski-button {
            padding: 12px 24px;
            background: var(--accent-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            font-family: var(--font-heading);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 126, 95, 0.3);
            flex-shrink: 0;
        }

        .ski-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(255, 126, 95, 0.4);
        }
        
        .ski-button:active:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(255, 126, 95, 0.3);
        }

        .ski-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .auto-request-btn {
            width: 100%;
            margin-top: auto;
        }

        /* --- ç»“æœå±•ç¤ºåŒº --- */
        .result-area {
            margin-top: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .default-text {
            flex-grow: 1;
            display: grid;
            place-items: center;
            color: var(--text-light);
            font-style: italic;
            background: rgba(240, 248, 255, 0.5);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .result-container {
            background: #f8fcff;
            border: 1px solid #e0eef7;
            border-radius: 12px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            word-wrap: break-word;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        .result-container::-webkit-scrollbar { width: 8px; }
        .result-container::-webkit-scrollbar-track { background: #eef7ff; border-radius: 4px; }
        .result-container::-webkit-scrollbar-thumb { background: #b0c4d4; border-radius: 4px; }
        .result-container::-webkit-scrollbar-thumb:hover { background: #98b0c2; }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: var(--accent-color);
            font-weight: 500;
            font-size: 1.1rem;
        }
        .loading::before {
            content: 'ğŸ‚';
            font-size: 24px;
            animation: ski-anim 1.5s cubic-bezier(0.65, 0.05, 0.36, 1) infinite;
        }
        @keyframes ski-anim {
            0% { transform: translateX(-30px) rotate(-20deg); }
            50% { transform: translateX(30px) rotate(10deg); }
            100% { transform: translateX(-30px) rotate(-20deg); }
        }

        /* --- ç»“æ„åŒ–æ•°æ®ç¾åŒ– --- */
        .weather-display .temperature {
            font-size: 3rem;
            font-weight: 700;
            color: #2193b0;
            margin: 10px 0;
        }
        .current-time {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2193b0;
            text-align: center;
            margin: 20px 0;
        }
        .article {
            background: #fff;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 5px solid var(--accent-color);
        }
        .article h4 { color: var(--text-dark); margin-bottom: 5px; }
        .content-text {
            background: #eef7ff;
            border: 1px solid #d0e0e8;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-break: break-all;
        }

        /* --- å“åº”å¼è®¾è®¡ --- */
        @media (max-width: 1200px) {
            .card-weather { grid-column: span 6; }
            .card-news { grid-column: span 6; }
            .card-browser { grid-column: span 12; }
            .card-time { grid-column: span 5; }
            .card-research { grid-column: span 7; }
            .card-calculator { grid-column: span 6; }
            .card-file { grid-column: span 6; }
        }

        @media (max-width: 768px) {
            .resort-header h1 { font-size: 2.5rem; }
            .resort-header p { font-size: 1.1rem; }
            .dashboard-slope { grid-template-columns: 1fr; }
            .slope-card { grid-column: span 1 !important; }
            .parallax-bg { display: none; } /* ç§»åŠ¨ç«¯ç¦ç”¨è§†å·®ä»¥æé«˜æ€§èƒ½ */
            .input-goggle { flex-direction: column; }
        }
    </style>
</head>
<body>

    <div class="snow-container"></div>

    <div class="parallax-bg">
        <div class="mountain mountain-back"></div>
        <div class="mountain mountain-front"></div>
    </div>

    <main class="resort-dashboard">
        <header class="resort-header">
            <h1>æ»‘é›ªå¤§å†’é™©</h1>
            <p>æ‚¨çš„å…¨å¤©å€™æ™ºèƒ½æ»‘é›ªåŠ©ç†</p>
        </header>

        <div class="dashboard-slope">
            <!-- å¤©æ°”æŸ¥è¯¢ -->
            <div class="slope-card card-weather">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.5 4.5 0 002.25 15z" /></svg>
                    </div>
                    <h3 class="card-title">é›ªåœºå¤©æ°”</h3>
                </div>
                <div class="card-content">
                    <div id="weather-result" class="result-area">
                        <div class="default-text">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œè·å–å®æ—¶é›ªåœºå¤©æ°”é¢„æŠ¥</div>
                    </div>
                    <button class="ski-button auto-request-btn" onclick="getWeatherInfo()">åˆ·æ–°å¤©æ°”</button>
                </div>
            </div>

            <!-- ä»Šæ—¥æ–°é—» -->
            <div class="slope-card card-news">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 01-2.25 2.25M16.5 7.5V18a2.25 2.25 0 002.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 002.25 2.25h13.5M6 7.5h3v3H6v-3z" /></svg>
                    </div>
                    <h3 class="card-title">æ»‘é›ªå¿«è®¯</h3>
                </div>
                <div class="card-content">
                    <div id="news-result" class="result-area">
                        <div class="default-text">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œè·å–æœ€æ–°çš„æ»‘é›ªç•ŒåŠ¨æ€å’Œæ–°é—»</div>
                    </div>
                    <button class="ski-button auto-request-btn" onclick="getNewsInfo()">è·å–å¿«è®¯</button>
                </div>
            </div>

            <!-- ç½‘é¡µæµè§ˆ -->
            <div class="slope-card card-browser">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A11.953 11.953 0 0112 13.5c-2.998 0-5.74-1.1-7.843-2.918m0 0A8.959 8.959 0 013 12c0-.778.099-1.533.284-2.253m0 0A11.953 11.953 0 0112 10.5" /></svg>
                    </div>
                    <h3 class="card-title">é›ªé“æ¢ç´¢</h3>
                </div>
                <div class="card-content">
                    <div class="input-goggle">
                        <input type="url" id="url-input" class="card-input" placeholder="è¾“å…¥ç½‘å€ï¼Œæ¢ç´¢ç½‘ç»œé›ªé“..." onkeypress="handleUrlKeyPress(event)">
                        <button class="ski-button" onclick="extractContent()">å‡ºå‘</button>
                    </div>
                    <div id="browser-result" class="result-area">
                        <div class="default-text">è¾“å…¥ç½‘å€ï¼Œæ™ºèƒ½åˆ†æç½‘é¡µæ ¸å¿ƒå†…å®¹</div>
                    </div>
                </div>
            </div>

            <!-- å½“å‰æ—¶é—´ -->
            <div class="slope-card card-time">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <h3 class="card-title">ç¼†è½¦æ—¶é—´</h3>
                </div>
                <div class="card-content">
                    <div id="time-result" class="result-area">
                        <div class="default-text">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼ŒåŒæ­¥é›ªåœºæ ‡å‡†æ—¶é—´</div>
                    </div>
                    <button class="ski-button auto-request-btn" onclick="getCurrentTime()">åŒæ­¥æ—¶é—´</button>
                </div>
            </div>

            <!-- é—®é¢˜ç ”ç©¶ -->
            <div class="slope-card card-research">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.553L16.5 21.75l-.398-1.197a3.375 3.375 0 00-2.456-2.456L12.5 18l1.197-.398a3.375 3.375 0 002.456-2.456L16.5 14.25l.398 1.197a3.375 3.375 0 002.456 2.456L20.5 18l-1.197.398a3.375 3.375 0 00-2.456 2.456z" /></svg>
                    </div>
                    <h3 class="card-title">æ·±åº¦ç ”ç©¶</h3>
                </div>
                <div class="card-content">
                    <div class="input-goggle">
                        <input type="text" id="research-input" class="card-input" placeholder="è¾“å…¥ä¸»é¢˜ï¼Œå¦‚ï¼šå•æ¿æ»‘é›ªæŠ€å·§" onkeypress="handleResearchKeyPress(event)">
                        <button class="ski-button" onclick="doResearch()">ç ”ç©¶</button>
                    </div>
                    <div id="research-result" class="result-area">
                        <div class="default-text">è¾“å…¥æ‚¨æ„Ÿå…´è¶£çš„ä¸»é¢˜ï¼Œè¿›è¡Œæ·±åº¦æŒ–æ˜å’Œåˆ†æ</div>
                    </div>
                </div>
            </div>

            <!-- è®¡ç®—å™¨ -->
            <div class="slope-card card-calculator">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008zm0 3h.008v.008H8.25v-.008zm0 3h.008v.008H8.25v-.008zm3-6h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm3-6h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zm0 3h.008v.008h-.008v-.008zM6 18.75h12A2.25 2.25 0 0020.25 16.5V7.5A2.25 2.25 0 0018 5.25H6A2.25 2.25 0 003.75 7.5v9A2.25 2.25 0 006 18.75z" /></svg>
                    </div>
                    <h3 class="card-title">æ™ºèƒ½è®¡ç®—</h3>
                </div>
                <div class="card-content">
                    <div class="input-goggle">
                        <input type="text" id="calc-input" class="card-input" placeholder="è¡¨è¾¾å¼..." onkeypress="handleCalcKeyPress(event)">
                        <button class="ski-button" onclick="doCalculate()">=</button>
                    </div>
                    <div id="calc-result" class="result-area">
                        <div class="default-text">è®¡ç®—å¡åº¦ã€èŠ±è´¹...</div>
                    </div>
                </div>
            </div>

            <!-- æ–‡ä»¶å†…å®¹ -->
            <div class="slope-card card-file">
                <div class="card-header">
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9.75h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <h3 class="card-title">è£…å¤‡åº“</h3>
                </div>
                <div class="card-content">
                    <div id="file-result" class="result-area">
                        <div class="default-text">ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼ŒæŸ¥çœ‹æ‚¨çš„è£…å¤‡æ¸…å•</div>
                    </div>
                    <button class="ski-button auto-request-btn" onclick="showFileContent()">æŸ¥çœ‹æ¸…å•</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- åŠ¨æ€æ•ˆæœè„šæœ¬ ---
        document.addEventListener('DOMContentLoaded', () => {
            // é›ªèŠ±æ•ˆæœ
            const snowContainer = document.querySelector('.snow-container');
            for (let i = 0; i < 50; i++) {
                const snow = document.createElement('div');
                snow.className = 'snow';
                const size = Math.random() * 4 + 1;
                snow.style.width = `${size}px`;
                snow.style.height = `${size}px`;
                snow.style.left = `${Math.random() * 100}vw`;
                snow.style.animationDuration = `${Math.random() * 5 + 5}s`;
                snow.style.animationDelay = `${Math.random() * 5}s`;
                snowContainer.appendChild(snow);
            }

            // è§†å·®æ•ˆæœ
            const mountainBack = document.querySelector('.mountain-back');
            const mountainFront = document.querySelector('.mountain-front');
            window.addEventListener('scroll', () => {
                const scrollY = window.scrollY;
                if (window.innerWidth > 768) { // åªåœ¨æ¡Œé¢ç«¯å¯ç”¨
                    mountainBack.style.transform = `translateY(${scrollY * 0.1}px)`;
                    mountainFront.style.transform = `translateY(${scrollY * 0.25}px)`;
                }
            });
        });

        // --- AI Agent API åŠŸèƒ½è„šæœ¬ (ä¸æ¨¡æ¿ä¿æŒä¸€è‡´) ---
        window.aiAgentAPI = {
            baseURL: 'http://localhost:8080',
            async callAPI(endpoint, input, expectedType = null) {
                try {
                    const requestId = `Req-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
                    console.log(`ğŸŒ [${requestId}] APIè¯·æ±‚: ${endpoint} with input: ${input}`);
                    const response = await fetch(`${this.baseURL}/api/preset/${endpoint}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ input: input, thread_id: 'dashboard_' + Date.now() })
                    });
                    const data = await response.json();
                    if (!data.success) {
                        console.error(`âŒ [${requestId}] APIå¤±è´¥:`, data.error);
                        return 'æŸ¥è¯¢å¤±è´¥: ' + (data.error || 'æœªçŸ¥é”™è¯¯');
                    }
                    return data.response;
                } catch (error) {
                    console.error(`âŒ APIç½‘ç»œé”™è¯¯:`, error);
                    return 'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥æœ¬åœ°æœåŠ¡æ˜¯å¦å¼€å¯ã€‚';
                }
            },
            weather: (city = 'åŒ—äº¬') => window.aiAgentAPI.callAPI('weather', city, 'weather'),
            news: (topic = 'ä»Šæ—¥å¤´æ¡') => window.aiAgentAPI.callAPI('news', topic, 'news'),
            extract: (url) => window.aiAgentAPI.callAPI('extract', url, 'extract'),
            research: (topic) => window.aiAgentAPI.callAPI('research', topic, 'research'),
            calculate: (expr) => window.aiAgentAPI.callAPI('calculate', expr, 'calculate'),
            datetime: (query = 'current') => window.aiAgentAPI.callAPI('datetime', query, 'datetime'),
            file: (operation) => window.aiAgentAPI.callAPI('file', operation, 'file')
        };

        function showLoading(elementId) {
            const element = document.getElementById(elementId);
            element.innerHTML = '<div class="loading">æ­£åœ¨å‡†å¤‡é›ªé“...</div>';
        }

        function parseAndShowResult(elementId, result) {
            const element = document.getElementById(elementId);
            try {
                let jsonData = result;
                const jsonStart = result.indexOf('{');
                const jsonEnd = result.lastIndexOf('}');
                if (jsonStart !== -1 && jsonEnd !== -1 && jsonEnd > jsonStart) {
                    jsonData = result.substring(jsonStart, jsonEnd + 1);
                }
                const data = JSON.parse(jsonData);
                const formattedHTML = formatJSONData(data);
                element.innerHTML = `<div class="result-container">${formattedHTML}</div>`;
            } catch (e) {
                element.innerHTML = `<div class="result-container"><div class="result-text">${result}</div></div>`;
            }
        }

        function formatJSONData(data) {
            if (!data || !data.type) return `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            switch (data.type) {
                case 'weather': return formatWeatherData(data);
                case 'news': return formatNewsData(data);
                case 'extract': return formatExtractData(data);
                case 'research': return formatResearchData(data);
                case 'calculate': return formatCalculateData(data);
                case 'datetime': return formatDateTimeData(data);
                case 'file': return formatFileData(data);
                default: return `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            }
        }

        function formatWeatherData(data) {
            return `<div class="weather-display">
                        <h3>${data.city || 'æœªçŸ¥åœ°ç‚¹'}</h3>
                        <div class="temperature">${data.temperature?.current || 'N/A'}</div>
                        <p><strong>å¤©æ°”:</strong> ${data.condition || 'æœªçŸ¥'}</p>
                        <p><strong>æ¸©åº¦èŒƒå›´:</strong> ${data.temperature?.low || 'N/A'} ~ ${data.temperature?.high || 'N/A'}</p>
                        <p><strong>ç©ºæ°”è´¨é‡:</strong> ${data.airQuality || 'N/A'}</p>
                        ${data.suggestions?.length > 0 ? `<h4>æ»‘é›ªå»ºè®®:</h4><ul>${data.suggestions.map(s => `<li>${s}</li>`).join('')}</ul>` : ''}
                    </div>`;
        }
        function formatNewsData(data) {
            return `<div class="news-display">
                        <h3>${data.topic}</h3>
                        <p>${data.summary}</p>
                        ${data.articles.map(article => `<div class="article"><h4>${article.title}</h4><p>${article.summary}</p><small>${article.source} | ${article.time}</small></div>`).join('')}
                    </div>`;
        }
        function formatExtractData(data) {
            return `<div class="extract-display">
                        <h3>${data.title}</h3>
                        <p><strong>æ ¸å¿ƒå†…å®¹:</strong> ${data.mainContent}</p>
                        <h4>æ€»ç»“:</h4><p>${data.summary}</p>
                    </div>`;
        }
        function formatResearchData(data) {
            return `<div class="research-display">
                        <h3>${data.topic} ç ”ç©¶æŠ¥å‘Š</h3>
                        <p>${data.introduction}</p>
                        <h4>æ ¸å¿ƒå‘ç°:</h4><ul>${data.keyFindings.map(f => `<li>${f}</li>`).join('')}</ul>
                        <h4>ç»“è®º:</h4><p>${data.conclusion}</p>
                    </div>`;
        }
        function formatCalculateData(data) {
            return `<div class="calculate-display">
                        <h3>è®¡ç®—ç»“æœ</h3>
                        <p><strong>è¡¨è¾¾å¼:</strong> <code>${data.expression}</code></p>
                        <p style="font-size: 1.5rem; font-weight: bold;"><strong>ç»“æœ:</strong> ${data.result}</p>
                        <h4>æ­¥éª¤:</h4><ol>${data.steps.map(s => `<li>${s}</li>`).join('')}</ol>
                    </div>`;
        }
        function formatDateTimeData(data) {
            return `<div class="datetime-display">
                        <div class="current-time">${data.currentTime}</div>
                        <p style="text-align:center;">${data.date} | ${data.weekday}</p>
                    </div>`;
        }
        function formatFileData(data) {
            return `<div class="file-display">
                        <h3>è£…å¤‡æ¸…å•</h3>
                        <p><strong>è·¯å¾„:</strong> <code>${data.path}</code></p>
                        <h4>å†…å®¹:</h4>
                        <pre class="content-text">${data.content}</pre>
                    </div>`;
        }

        function showResult(elementId, result) { parseAndShowResult(elementId, result); }

        async function handleRequest(button, elementId, apiCall) {
            const originalText = button.textContent;
            button.disabled = true;
            button.textContent = 'å¤„ç†ä¸­...';
            showLoading(elementId);
            try {
                const result = await apiCall();
                showResult(elementId, result);
            } catch (error) {
                showResult(elementId, `è¯·æ±‚å¤±è´¥: ${error.message}`);
            }
            button.disabled = false;
            button.textContent = originalText;
        }

        function getWeatherInfo() { handleRequest(event.target, 'weather-result', () => window.aiAgentAPI.weather('å´‡ç¤¼')); }
        function getNewsInfo() { handleRequest(event.target, 'news-result', () => window.aiAgentAPI.news('æ»‘é›ªè¿åŠ¨')); }
        function extractContent() {
            const url = document.getElementById('url-input').value.trim();
            if (!url) { showResult('browser-result', 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç½‘å€'); return; }
            handleRequest(event.target, 'browser-result', () => window.aiAgentAPI.extract(url));
        }
        function doResearch() {
            const topic = document.getElementById('research-input').value.trim();
            if (!topic) { showResult('research-result', 'è¯·è¾“å…¥ç ”ç©¶ä¸»é¢˜'); return; }
            handleRequest(event.target, 'research-result', () => window.aiAgentAPI.research(topic));
        }
        function doCalculate() {
            const expr = document.getElementById('calc-input').value.trim();
            if (!expr) { showResult('calc-result', 'è¯·è¾“å…¥æ•°å­¦è¡¨è¾¾å¼'); return; }
            handleRequest(event.target, 'calc-result', () => window.aiAgentAPI.calculate(expr));
        }
        function getCurrentTime() { handleRequest(event.target, 'time-result', () => window.aiAgentAPI.datetime('current')); }
        function showFileContent() {
            const path = '/Users/yaoerzhuang/dev/work/agent/langGrap-info-create/å±•ç¤ºçš„æ–‡ä»¶å†…å®¹.md';
            handleRequest(event.target, 'file-result', () => window.aiAgentAPI.file(`read:${path}`));
        }

        function handleUrlKeyPress(event) { if (event.key === 'Enter') extractContent(); }
        function handleResearchKeyPress(event) { if (event.key === 'Enter') doResearch(); }
        function handleCalcKeyPress(event) { if (event.key === 'Enter') doCalculate(); }

        // é¡µé¢åŠ è½½åè‡ªåŠ¨è¯·æ±‚æ‰€æœ‰åŠŸèƒ½
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                document.querySelector('.card-weather .ski-button').click();
                document.querySelector('.card-news .ski-button').click();
                document.querySelector('.card-time .ski-button').click();
                document.querySelector('.card-file .ski-button').click();
                
                const urlInput = document.getElementById('url-input');
                urlInput.value = 'https://www.goski.cn/';
                document.querySelector('.card-browser .ski-button').click();

                const researchInput = document.getElementById('research-input');
                researchInput.value = 'å¦‚ä½•é€‰æ‹©ç¬¬ä¸€å—æ»‘é›ªæ¿';
                document.querySelector('.card-research .ski-button').click();

                const calcInput = document.getElementById('calc-input');
                calcInput.value = '(1999 + 880) * 0.8'; // é›ªæ¿+é›ªé‹æ‰“å…«æŠ˜
                document.querySelector('.card-calculator .ski-button').click();
            }, 1000);
        });
    </script>

<script>
// AIç½‘é¡µè®¾è®¡å¸ˆ - é«˜çº§åŠŸèƒ½é›†æˆ
// æ£€æŸ¥æ˜¯å¦å·²ç»å­˜åœ¨aiAgentAPIï¼Œå¦‚æœä¸å­˜åœ¨æ‰åˆ›å»º
if (!window.aiAgentAPI) {
    window.aiAgentAPI = {
        baseURL: 'http://localhost:8080',
        
        // é€šç”¨APIè°ƒç”¨å‡½æ•°
        async callAPI(endpoint, input) {
            try {
                const response = await fetch(`${this.baseURL}/api/preset/${endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        input: input, 
                        thread_id: 'ai_webpage_' + Date.now() 
                    })
                });
                const data = await response.json();
                return data.success ? data.response : 'æŸ¥è¯¢å¤±è´¥: ' + (data.error || 'æœªçŸ¥é”™è¯¯');
            } catch (error) {
                return 'ç½‘ç»œé”™è¯¯: ' + error.message;
            }
        },
        
        // å„ç§åŠŸèƒ½çš„ä¾¿æ·æ–¹æ³•
        weather: (city = 'åŒ—äº¬') => window.aiAgentAPI.callAPI('weather', city),
        news: (topic = 'ä»Šæ—¥å¤´æ¡') => window.aiAgentAPI.callAPI('news', topic),
        extract: (url) => window.aiAgentAPI.callAPI('extract', url),
        research: (topic) => window.aiAgentAPI.callAPI('research', topic),
        calculate: (expr) => window.aiAgentAPI.callAPI('calculate', expr),
        datetime: (query = 'current') => window.aiAgentAPI.callAPI('datetime', query),
        file: (operation) => window.aiAgentAPI.callAPI('file', operation),
        system: (type = 'all') => window.aiAgentAPI.callAPI('system', type)
    };
    console.log('ğŸ”§ åˆ›å»ºäº†ç®€åŒ–ç‰ˆ aiAgentAPI');
} else {
    console.log('âœ… æ£€æµ‹åˆ°å·²å­˜åœ¨å®Œæ•´ç‰ˆ aiAgentAPIï¼Œè·³è¿‡é‡å¤åˆ›å»º');
}

// æ™ºèƒ½ç»“æœæ˜¾ç¤ºå‡½æ•° - å°è¯•ä½¿ç”¨ç°æœ‰çš„JSONå¤„ç†é€»è¾‘
function showSmartResult(element, result) {
    // æ£€æŸ¥æ˜¯å¦å­˜åœ¨å®Œæ•´çš„JSONå¤„ç†å‡½æ•°
    if (typeof window.parseAndShowResult === 'function') {
        // ä¸ºelementåˆ›å»ºä¸´æ—¶IDï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
        if (!element.id) {
            element.id = 'temp_result_' + Date.now();
        }
        console.log('ğŸ¯ ä½¿ç”¨å®Œæ•´ç‰ˆJSONå¤„ç†é€»è¾‘æ˜¾ç¤ºç»“æœ');
        window.parseAndShowResult(element.id, result);
    } else if (typeof window.showResult === 'function') {
        // ä½¿ç”¨showResultå‡½æ•°
        if (!element.id) {
            element.id = 'temp_result_' + Date.now();
        }
        console.log('ğŸ“‹ ä½¿ç”¨showResultå‡½æ•°æ˜¾ç¤ºç»“æœ');
        window.showResult(element.id, result);
    } else {
        // å›é€€åˆ°ç®€å•æ˜¾ç¤º
        console.log('ğŸ“ ä½¿ç”¨ç®€å•æ–‡æœ¬æ˜¾ç¤ºç»“æœ');
        element.innerHTML = `<pre style="white-space: pre-wrap; font-size: 0.9em; line-height: 1.4; max-height: 300px; overflow-y: auto;">${result}</pre>`;
    }
}

// è‡ªåŠ¨ä¸ºæ‰€æœ‰åŠŸèƒ½åŒºåŸŸæ·»åŠ ç‚¹å‡»äº‹ä»¶
document.addEventListener('DOMContentLoaded', function() {
    // æ™ºèƒ½è¯†åˆ«åŠŸèƒ½åŒºåŸŸ
    const functionalElements = document.querySelectorAll(
        '[class*="weather"], [class*="news"], [class*="browser"], [class*="research"], ' +
        '[class*="calculator"], [class*="time"], [class*="file"], [class*="system"], ' +
        '[data-function], .dashboard-card, .card, .panel, .widget'
    );
    
    functionalElements.forEach(element => {
        // é¿å…é‡å¤ç»‘å®š
        if (element.hasAttribute('data-ai-bound')) return;
        element.setAttribute('data-ai-bound', 'true');
        
        element.style.cursor = 'pointer';
        
        // ä¸ºè¾“å…¥æ¡†é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œè¿™æ ·ç‚¹å‡»è¾“å…¥æ¡†ä¸ä¼šè§¦å‘AIè¯·æ±‚
        const inputs = element.querySelectorAll('input, textarea, select');
        inputs.forEach(input => {
            input.style.cursor = 'text';
            input.addEventListener('click', function(event) {
                event.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
                console.log('ğŸ“ è¾“å…¥æ¡†å¯æ­£å¸¸ç¼–è¾‘');
            });
        });
        
        element.addEventListener('click', async function() {
            // æ™ºèƒ½è¯†åˆ«åŠŸèƒ½ç±»å‹
            const text = this.textContent || this.className || '';
            const classList = Array.from(this.classList).join(' ');
            
            let result = '';
            let loadingElement = this.querySelector('.card-content, .content, .body, .result-container') || this;
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const originalContent = loadingElement.innerHTML;
            loadingElement.innerHTML = '<div class="loading">æ­£åœ¨å¤„ç†ä¸­...</div>';
            
            try {
                if (text.includes('å¤©æ°”') || classList.includes('weather')) {
                    const cityInput = this.querySelector('input[type="text"]');
                    const city = cityInput ? cityInput.value.trim() || 'åŒ—äº¬' : 'åŒ—äº¬';
                    result = await window.aiAgentAPI.weather(city);
                } else if (text.includes('æ–°é—»') || classList.includes('news')) {
                    const topicInput = this.querySelector('input[type="text"]');
                    const topic = topicInput ? topicInput.value.trim() || 'ç§‘æŠ€æ–°é—»' : 'ç§‘æŠ€æ–°é—»';
                    result = await window.aiAgentAPI.news(topic);
                } else if (text.includes('ç½‘é¡µ') || text.includes('æµè§ˆ') || classList.includes('browser')) {
                    const urlInput = this.querySelector('input[type="text"], input[type="url"]');
                    if (urlInput && urlInput.value.trim()) {
                        result = await window.aiAgentAPI.extract(urlInput.value.trim());
                    } else {
                        result = 'è¯·åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥URLï¼Œç„¶åç‚¹å‡»å¡ç‰‡ç©ºç™½åŒºåŸŸè§¦å‘æå–\nç¤ºä¾‹: https://www.example.com';
                    }
                } else if (text.includes('ç ”ç©¶') || text.includes('åˆ†æ') || classList.includes('research')) {
                    const researchInput = this.querySelector('input[type="text"], textarea');
                    const topic = researchInput ? researchInput.value.trim() || 'äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿' : 'äººå·¥æ™ºèƒ½å‘å±•è¶‹åŠ¿';
                    result = await window.aiAgentAPI.research(topic);
                } else if (text.includes('è®¡ç®—') || classList.includes('calculator')) {
                    const calcInput = this.querySelector('input[type="text"]');
                    const expr = calcInput ? calcInput.value.trim() || 'sqrt(16) + log(10)' : 'sqrt(16) + log(10)';
                    result = await window.aiAgentAPI.calculate(expr);
                } else if (text.includes('æ—¶é—´') || classList.includes('time')) {
                    result = await window.aiAgentAPI.datetime('current');
                } else if (text.includes('æ–‡ä»¶') || classList.includes('file')) {
                    const fileInput = this.querySelector('input[type="text"]');
                    const operation = fileInput ? fileInput.value.trim() || 'list:.' : 'list:.';
                    result = await window.aiAgentAPI.file(operation);
                } else if (text.includes('ç³»ç»Ÿ') || classList.includes('system')) {
                    result = await window.aiAgentAPI.system('memory');
                } else {
                    result = 'âœ¨ AIåŠŸèƒ½åŒºåŸŸ\nè¾“å…¥æ¡†å¯æ­£å¸¸ç¼–è¾‘ï¼Œç‚¹å‡»å¡ç‰‡å…¶ä»–åŒºåŸŸè§¦å‘AIè¯·æ±‚';
                }
                
                // ä½¿ç”¨æ™ºèƒ½ç»“æœæ˜¾ç¤º
                showSmartResult(loadingElement, result);
                
            } catch (error) {
                loadingElement.innerHTML = `<div style="color: #e74c3c;">âŒ é”™è¯¯: ${error.message}</div>`;
            }
        });
    });
    
    console.log('ğŸ¨ AIç½‘é¡µè®¾è®¡å¸ˆåŠŸèƒ½é›†æˆå®Œæˆï¼Œæ‰¾åˆ°', functionalElements.length, 'ä¸ªåŠŸèƒ½åŒºåŸŸ');
    console.log('ğŸ’¡ æç¤ºï¼šè¾“å…¥æ¡†å¯æ­£å¸¸ç¼–è¾‘ï¼Œç‚¹å‡»å¡ç‰‡å…¶ä»–åŒºåŸŸè§¦å‘AIè¯·æ±‚');
});
</script>
</body>
</html>